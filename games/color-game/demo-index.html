<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>üé≤ Color Game - Perya Style</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Game Container -->
    <div id="game-container">
        <!-- THREE.js Canvas -->
        <div id="canvas-container"></div>
        
        <!-- UI Overlay -->
        <div class="ui-overlay">
            <!-- Header -->
            <header class="game-header">
                <h1>üé≤ Color Game</h1>
                <p class="subtitle">Perya-Style Betting ‚Ä¢ Real Physics</p>
            </header>
            
            <!-- Balance Display -->
            <div class="balance-display">
                <div class="balance-label">Game Balance</div>
                <div class="balance-amount" id="balance">500</div>
                <div class="balance-unit">points</div>
            </div>
            
            <!-- Phase Indicator -->
            <div class="phase-indicator" id="phase">
                Ready to Roll!
            </div>
            
            <!-- Result Display -->
            <div class="result-display" id="result" style="display: none;">
                <div class="result-label">Result:</div>
                <div class="result-dice" id="result-dice"></div>
                <div class="result-outcome" id="result-outcome"></div>
            </div>
            
            <!-- Betting Panel -->
            <div class="betting-panel">
                <div class="bet-chips">
                    <div class="chip-label">Select Bet Amount:</div>
                    <div class="chips">
                        <button class="chip" data-amount="5">5</button>
                        <button class="chip" data-amount="10">10</button>
                        <button class="chip selected" data-amount="50">50</button>
                        <button class="chip" data-amount="100">100</button>
                        <button class="chip" data-amount="500">500</button>
                    </div>
                </div>
                
                <div class="color-panels">
                    <!-- Row 1 -->
                    <div class="color-row">
                        <div class="color-panel" data-color="yellow">
                            <div class="bet-badge" data-color="yellow">0</div>
                            <div class="color-face" style="background: #FFD700;"></div>
                            <div class="color-name">YELLOW</div>
                            <div class="payout">PAY 2√ó/5√ó/10√ó</div>
                        </div>
                        
                        <div class="color-panel" data-color="white">
                            <div class="bet-badge" data-color="white">0</div>
                            <div class="color-face" style="background: #FFFFFF;"></div>
                            <div class="color-name">WHITE</div>
                            <div class="payout">PAY 2√ó/5√ó/10√ó</div>
                        </div>
                        
                        <div class="color-panel" data-color="pink">
                            <div class="bet-badge" data-color="pink">0</div>
                            <div class="color-face" style="background: #FF1493;"></div>
                            <div class="color-name">PINK</div>
                            <div class="payout">PAY 2√ó/5√ó/10√ó</div>
                        </div>
                    </div>
                    
                    <!-- Row 2 -->
                    <div class="color-row">
                        <div class="color-panel" data-color="blue">
                            <div class="bet-badge" data-color="blue">0</div>
                            <div class="color-face" style="background: #0080FF;"></div>
                            <div class="color-name">BLUE</div>
                            <div class="payout">PAY 2√ó/5√ó/10√ó</div>
                        </div>
                        
                        <div class="color-panel" data-color="red">
                            <div class="bet-badge" data-color="red">0</div>
                            <div class="color-face" style="background: #FF0000;"></div>
                            <div class="color-name">RED</div>
                            <div class="payout">PAY 2√ó/5√ó/10√ó</div>
                        </div>
                        
                        <div class="color-panel" data-color="green">
                            <div class="bet-badge" data-color="green">0</div>
                            <div class="color-face" style="background: #00FF00;"></div>
                            <div class="color-name">GREEN</div>
                            <div class="payout">PAY 2√ó/5√ó/10√ó</div>
                        </div>
                    </div>
                </div>
                
                <div class="bet-summary">
                    <div class="total-bet">
                        Total Bet: <span id="total-bet">0</span> pts
                    </div>
                    <button class="btn-clear" id="btn-clear">üóëÔ∏è Clear All</button>
                </div>
            </div>
            
            <!-- Control Buttons -->
            <div class="controls">
                <button class="btn-primary" id="btn-roll">
                    üé≤ ROLL DICE
                </button>
                <button class="btn-secondary" id="btn-cashout">
                    üí∞ Cash Out
                </button>
            </div>
        </div>
    </div>
    
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>Loading 3D Engine...</p>
        </div>
    </div>
    
    <!-- External Libraries - Load synchronously -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Load cannon.js from local server (hosted on your server) -->
    <script src="js/libs/cannon.min.js"></script>
    <script>
        // Verify CANNON loaded
        (function() {
            function checkCANNON() {
                if (typeof CANNON !== 'undefined') {
                    console.log('‚úÖ CANNON.js loaded successfully (local server)');
                    window.CANNON_LOADED = true;
                    window.dispatchEvent(new CustomEvent('cannon-loaded'));
                } else {
                    console.warn('‚ö†Ô∏è CANNON not yet defined, retrying...');
                    setTimeout(checkCANNON, 50);
                }
            }
            // Check immediately and after a short delay
            checkCANNON();
        })();
    </script>
    
    <!-- Verify libraries loaded -->
    <script>
        window.addEventListener('load', function() {
            if (typeof THREE === 'undefined') {
                console.error('‚ùå THREE.js failed to load!');
            } else {
                console.log('‚úÖ THREE.js loaded');
            }
        });
    </script>
    
    <!-- Game Modules - Load after libraries -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
